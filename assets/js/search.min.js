window.WPKB_Search=function(a){"use strict";function b(b,c){var g={action:"wpkb_search",search:b.find(".wpkb-search-term").val()};if(c="undefined"!=typeof c&&c,!c){if("undefined"!=typeof f[g.search])return void b.find(".wpkb-search-results").html(f[g.search]);if(""==g.search||g.search.length<3)return;if(0===g.search.indexOf(e)&&g.search.length<e.length+2&&g.search.length>e.length-2)return}d||(e=g.search,d=!0,a.ajax({url:wpkb_search_vars.ajaxurl,data:g,complete:function(){d=!1},success:function(a){a.success&&(f[g.search]=a.data,b.find(".wpkb-search-results").html(a.data))},dataType:"json"}))}var c=0,d=!1,e="",f={};return a(".wpkb-search-term").keydown(function(){window.clearTimeout(c);var d=a(this).parents(".wpkb-search");c=window.setTimeout(function(){b(d)},300)}),a(".wpkb-search-form").submit(function(){var c=a(this).parents(".wpkb-search");return b(c,!0),!1}),{}}(window.jQuery);