window.WPKB_Search=function(i){"use strict";var n=0,a=!1,c="",u=i("<p><em>Searching..</em>");function t(n,e){var t={action:"wpkb_search",search:n.find(".wpkb-search-term").val()},r=encodeURIComponent(t.search.toLowerCase());if(!(e=void 0!==e&&e)){if(""==t.search||t.search.length<3)return;if(0===t.search.indexOf(c)&&t.search.length<c.length+2&&t.search.length>c.length-2)return;var o=lscache.get("wpkb_"+r);if(void 0!==o&&"string"==typeof o)return void n.find(".wpkb-search-results").html(o)}a||(c=t.search,a=!0,n.find(".wpkb-search-placeholder").remove(),n.find(".wpkb-search-results").prepend(u),i.ajax({url:wpkb_search_vars.ajaxurl,data:t,complete:function(){a=!1},success:function(e){e.success&&(lscache.set("wpkb_"+r,e.data,10),n.find(".wpkb-search-results").html(e.data))},dataType:"json"}),"function"==typeof window.ga&&window.ga("send","pageview",wpkb_config.base_path+"?wpkb-search="+t.search))}return i(".wpkb-search-term").keydown(function(){window.clearTimeout(n);var e=i(this).parents(".wpkb-search");n=window.setTimeout(function(){t(e)},300)}),i(".wpkb-search-form").submit(function(){return t(i(this).parents(".wpkb-search"),!0),!1}),{}}(window.jQuery),function(e,n){"function"==typeof define&&define.amd?define([],n):"undefined"!=typeof module&&module.exports?module.exports=n():e.lscache=n()}(this,function(){function a(){var e="__lscachetest__";if(void 0!==n)return n;try{l(e,"__lscachetest__"),d(e),n=!0}catch(e){n=!!c(e)}return n}function c(e){return!!(e&&"QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||"QuotaExceededError"===e.name)}function u(){return void 0===e&&(e=null!=window.JSON),e}function s(e){return e+i}function f(){return Math.floor((new Date).getTime()/r)}function h(e){return localStorage.getItem(o+v+e)}function l(e,n){localStorage.removeItem(o+v+e),localStorage.setItem(o+v+e,n)}function d(e){localStorage.removeItem(o+v+e)}function p(e){for(var n=new RegExp("^"+o+v+"(.*)"),t=localStorage.length-1;0<=t;--t){var r=localStorage.key(t);(r=(r=r&&r.match(n))&&r[1])&&r.indexOf(i)<0&&e(r,s(r))}}function w(e){var n=s(e);d(e),d(n)}function t(e){var n=s(e),t=h(n);if(t){var r=parseInt(t,10);if(f()>=r)return d(e),d(n),1}}function m(e,n){k&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+e),n&&window.console.warn("lscache - The error was: "+n.message))}var n,e,o="lscache-",i="-cacheexpiration",r=6e4,g=Math.floor(864e13/r),v="",k=!1;return{set:function(n,t,e){if(a()){if("string"!=typeof t){if(!u())return;try{t=JSON.stringify(t)}catch(e){return}}try{l(n,t)}catch(e){if(!c(e))return void m("Could not add item with key '"+n+"'",e);var r,o=[];p(function(e,n){var t=h(n);t=t?parseInt(t,10):g,o.push({key:e,size:(h(e)||"").length,expiration:t})}),o.sort(function(e,n){return n.expiration-e.expiration});for(var i=(t||"").length;o.length&&0<i;)r=o.pop(),m("Cache is full, removing item with key '"+n+"'"),w(r.key),i-=r.size;try{l(n,t)}catch(e){return void m("Could not add item with key '"+n+"', perhaps it's too big?",e)}}e?l(s(n),(f()+e).toString(10)):d(s(n))}},get:function(e){if(!a())return null;if(t(e))return null;var n=h(e);if(!n||!u())return n;try{return JSON.parse(n)}catch(e){return n}},remove:function(e){a()&&w(e)},supported:function(){return a()},flush:function(){a()&&p(function(e){w(e)})},flushExpired:function(){a()&&p(function(e){t(e)})},setBucket:function(e){v=e},resetBucket:function(){v=""},enableWarnings:function(e){k=e}}});