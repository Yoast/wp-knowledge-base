window.WPKB_Search=function(a){"use strict";function b(b,c){var h={action:"wpkb_search",search:b.find(".wpkb-search-term").val()};if(c="undefined"!=typeof c&&c,!c){if("undefined"!=typeof f[h.search])return void b.find(".wpkb-search-results").html(f[h.search]);if(""==h.search||h.search.length<3)return;if(0===h.search.indexOf(e)&&h.search.length<e.length+2&&h.search.length>e.length-2)return}d||(e=h.search,d=!0,b.find(".wpkb-search-placeholder").remove(),b.find(".wpkb-search-results").prepend(g),a.ajax({url:wpkb_search_vars.ajaxurl,data:h,complete:function(){d=!1},success:function(a){a.success&&(f[h.search]=a.data,b.find(".wpkb-search-results").html(a.data))},dataType:"json"}),"function"==typeof window.ga&&window.ga("send","pageview",window.location.pathname+"?wpkb-search="+h.search),"object"==typeof window.mixpanel&&window.mixpanel.track("KB Search",{term:h.search}),"object"==typeof window._kmq&&_kmq.push(["record","KB Search",{term:h.search}]))}var c=0,d=!1,e="",f={},g=a("<p><em>Searching..</em>");return a(".wpkb-search-term").keydown(function(){window.clearTimeout(c);var d=a(this).parents(".wpkb-search");c=window.setTimeout(function(){b(d)},300)}),a(".wpkb-search-form").submit(function(){var c=a(this).parents(".wpkb-search");return b(c,!0),!1}),{}}(window.jQuery);